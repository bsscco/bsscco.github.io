<!DOCTYPE html>
<html lang="">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Udacity Developing Android Apps with Kotlin 레슨9 Behind the scenes 요약 | ANDROID DEVELOPER BSSCCO</title>
  <link rel = 'canonical' href = '/posts/2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary/'>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Udacity Developing Android Apps with Kotlin 레슨9 Behind the scenes 요약" />
<meta property="og:description" content="Lesson 9: Behind the scenes 1. Offline Movie Night 2. Exercise: Introduction offline caching에 대해 배울 거야!
3. What’s in a Cache 캐시란, 다음에 곧 쓸 데이터를 로컬에 저장해뒀다가 필요할 때 다시 쓰는 것
우리앱에서 레포지토리 패턴을 써야 하는 이유 앱 실행 시에 다운로드받아 캐시해 사용할 만한 데이터들이 있다. 필터 목록 같은 데이터. 이 데이터를 따로 관리하는 클래스를 두는 것보다, 레포지토리 패턴을 써서 레포지토리 안에서 필요한 데이터만 캐시 시키면 레포지토리를 쓰는 곳에서는 캐시되는 데이터인지 실시간 데이터인지 알 필요 없어서 관심사의 분리가 된다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-06-26T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-06-26T00:00:00+00:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Udacity Developing Android Apps with Kotlin 레슨9 Behind the scenes 요약"/>
<meta name="twitter:description" content="Lesson 9: Behind the scenes 1. Offline Movie Night 2. Exercise: Introduction offline caching에 대해 배울 거야!
3. What’s in a Cache 캐시란, 다음에 곧 쓸 데이터를 로컬에 저장해뒀다가 필요할 때 다시 쓰는 것
우리앱에서 레포지토리 패턴을 써야 하는 이유 앱 실행 시에 다운로드받아 캐시해 사용할 만한 데이터들이 있다. 필터 목록 같은 데이터. 이 데이터를 따로 관리하는 클래스를 두는 것보다, 레포지토리 패턴을 써서 레포지토리 안에서 필요한 데이터만 캐시 시키면 레포지토리를 쓰는 곳에서는 캐시되는 데이터인지 실시간 데이터인지 알 필요 없어서 관심사의 분리가 된다."/>

  
  
    
  
  
  <link rel="stylesheet" href="/css/styles.21b53826999b56f614a462e7379896ede73d74a5692c12b28e7903a2718c278b00eb8c5d88fef06d852fd6311822698ff8397102b0517b964d57892b541fb785.css" integrity="sha512-IbU4JpmbVvYUpGLnN5iW7ec9dKVpLBKyjnkDonGMJ4sA64xdiP7wbYUv1jEYImmP&#43;DlxArBRe5ZNV4krVB&#43;3hQ=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="images/favicon.ico" />

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/categories">Categories</a></li>
         
        <li><a href="/tags">Tags</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" /posts/2019-06-19-udacity-developing-android-apps-with-kotlin-lesson-8-summary/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="/posts/2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-10-summary/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&text=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&is_video=false&description=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd&body=Check out this article: %2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&name=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd&description=Lesson%209%3a%20Behind%20the%20scenes%201.%20Offline%20Movie%20Night%202.%20Exercise%3a%20Introduction%20offline%20caching%ec%97%90%20%eb%8c%80%ed%95%b4%20%eb%b0%b0%ec%9a%b8%20%ea%b1%b0%ec%95%bc%21%0a3.%20What%e2%80%99s%20in%20a%20Cache%20%ec%ba%90%ec%8b%9c%eb%9e%80%2c%20%eb%8b%a4%ec%9d%8c%ec%97%90%20%ea%b3%a7%20%ec%93%b8%20%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc%20%eb%a1%9c%ec%bb%ac%ec%97%90%20%ec%a0%80%ec%9e%a5%ed%95%b4%eb%92%80%eb%8b%a4%ea%b0%80%20%ed%95%84%ec%9a%94%ed%95%a0%20%eb%95%8c%20%eb%8b%a4%ec%8b%9c%20%ec%93%b0%eb%8a%94%20%ea%b2%83%0a%ec%9a%b0%eb%a6%ac%ec%95%b1%ec%97%90%ec%84%9c%20%eb%a0%88%ed%8f%ac%ec%a7%80%ed%86%a0%eb%a6%ac%20%ed%8c%a8%ed%84%b4%ec%9d%84%20%ec%8d%a8%ec%95%bc%20%ed%95%98%eb%8a%94%20%ec%9d%b4%ec%9c%a0%20%ec%95%b1%20%ec%8b%a4%ed%96%89%20%ec%8b%9c%ec%97%90%20%eb%8b%a4%ec%9a%b4%eb%a1%9c%eb%93%9c%eb%b0%9b%ec%95%84%20%ec%ba%90%ec%8b%9c%ed%95%b4%20%ec%82%ac%ec%9a%a9%ed%95%a0%20%eb%a7%8c%ed%95%9c%20%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%93%a4%ec%9d%b4%20%ec%9e%88%eb%8b%a4.%20%ed%95%84%ed%84%b0%20%eb%aa%a9%eb%a1%9d%20%ea%b0%99%ec%9d%80%20%eb%8d%b0%ec%9d%b4%ed%84%b0.%20%ec%9d%b4%20%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc%20%eb%94%b0%eb%a1%9c%20%ea%b4%80%eb%a6%ac%ed%95%98%eb%8a%94%20%ed%81%b4%eb%9e%98%ec%8a%a4%eb%a5%bc%20%eb%91%90%eb%8a%94%20%ea%b2%83%eb%b3%b4%eb%8b%a4%2c%20%eb%a0%88%ed%8f%ac%ec%a7%80%ed%86%a0%eb%a6%ac%20%ed%8c%a8%ed%84%b4%ec%9d%84%20%ec%8d%a8%ec%84%9c%20%eb%a0%88%ed%8f%ac%ec%a7%80%ed%86%a0%eb%a6%ac%20%ec%95%88%ec%97%90%ec%84%9c%20%ed%95%84%ec%9a%94%ed%95%9c%20%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a7%8c%20%ec%ba%90%ec%8b%9c%20%ec%8b%9c%ed%82%a4%eb%a9%b4%20%eb%a0%88%ed%8f%ac%ec%a7%80%ed%86%a0%eb%a6%ac%eb%a5%bc%20%ec%93%b0%eb%8a%94%20%ea%b3%b3%ec%97%90%ec%84%9c%eb%8a%94%20%ec%ba%90%ec%8b%9c%eb%90%98%eb%8a%94%20%eb%8d%b0%ec%9d%b4%ed%84%b0%ec%9d%b8%ec%a7%80%20%ec%8b%a4%ec%8b%9c%ea%b0%84%20%eb%8d%b0%ec%9d%b4%ed%84%b0%ec%9d%b8%ec%a7%80%20%ec%95%8c%20%ed%95%84%ec%9a%94%20%ec%97%86%ec%96%b4%ec%84%9c%20%ea%b4%80%ec%8b%ac%ec%82%ac%ec%9d%98%20%eb%b6%84%eb%a6%ac%ea%b0%80%20%eb%90%9c%eb%8b%a4." aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&t=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#1-offline-movie-night">1. Offline Movie Night</a></li>
    <li><a href="#2-exercise-introduction">2. Exercise: Introduction</a></li>
    <li><a href="#3-whats-in-a-cache">3. What’s in a Cache</a>
      <ul>
        <li><a href="#우리앱에서-레포지토리-패턴을-써야-하는-이유">우리앱에서 레포지토리 패턴을 써야 하는 이유</a></li>
      </ul>
    </li>
    <li><a href="#4-how-to-store-data">4. How to store data</a></li>
    <li><a href="#5-decorating-a-room">5. Decorating a Room</a></li>
    <li><a href="#6-building-a-room">6. Building a Room</a></li>
    <li><a href="#7-exercise-add-a-databasevideo-entity">7. Exercise: Add a DatabaseVideo Entity</a></li>
    <li><a href="#8-exercise-add-the-videodao">8. Exercise: Add the VideoDao</a></li>
    <li><a href="#9-exercise-refactor-the-videodao">9. Exercise: Refactor the VideoDao</a></li>
    <li><a href="#10-exercise-add-the-videosdatabase">10. Exercise: Add the VideosDatabase</a></li>
    <li><a href="#11-room-review">11. Room Review</a></li>
    <li><a href="#12-googler-interview-sumir-kataria">12. Googler Interview: Sumir Kataria</a></li>
    <li><a href="#13-using-a-room">13. Using a Room</a></li>
    <li><a href="#14-exercise-build-a-repository">14. Exercise: Build a Repository</a></li>
    <li><a href="#15-exercise-use-the-repository">15. Exercise: Use the Repository</a></li>
    <li><a href="#16-video-offline-caching-review">16. Video: Offline Caching Review</a></li>
    <li><a href="#17-workmanager-for-the-background">17. WorkManager for the background</a></li>
    <li><a href="#18-exercise-create-a-worker">18. Exercise: Create a Worker</a></li>
    <li><a href="#19-exercise-schedule-background-work">19. Exercise: Schedule Background Work</a></li>
    <li><a href="#20-wrapping-up-caching">20. Wrapping up Caching</a></li>
    <li><a href="#마치면서">마치면서</a></li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Udacity Developing Android Apps with Kotlin 레슨9 Behind the scenes 요약
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2019-06-26 00:00:00 &#43;0000 UTC" itemprop="datePublished">2019-06-26</time>
          
        </div>
        
        
        
        <div class="article-category">
            <i class="fas fa-archive"></i>
            
            
            <a class="category-link" href="/categories/android">Android</a>
            
        </div>
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/kotlin" rel="tag">kotlin</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <h1 id="lesson-9-behind-the-scenes">Lesson 9: Behind the scenes</h1>
<h2 id="1-offline-movie-night">1. Offline Movie Night</h2>
<h2 id="2-exercise-introduction">2. Exercise: Introduction</h2>
<p>offline caching에 대해 배울 거야!</p>
<h2 id="3-whats-in-a-cache">3. What’s in a Cache</h2>
<p>캐시란, 다음에 곧 쓸 데이터를 로컬에 저장해뒀다가 필요할 때 다시 쓰는 것</p>
<p><img src="/2019-06-26/Untitled-65cb43d4-e27c-487d-8850-7ccc9c5d07af.png" alt=""></p>
<h3 id="우리앱에서-레포지토리-패턴을-써야-하는-이유">우리앱에서 레포지토리 패턴을 써야 하는 이유</h3>
<ol>
<li>앱 실행 시에 다운로드받아 캐시해 사용할 만한 데이터들이 있다. 필터 목록 같은 데이터. 이 데이터를 따로 관리하는 클래스를 두는 것보다, 레포지토리 패턴을 써서 레포지토리 안에서 필요한 데이터만 캐시 시키면 레포지토리를 쓰는 곳에서는 캐시되는 데이터인지 실시간 데이터인지 알 필요 없어서 관심사의 분리가 된다.</li>
<li>네트워크 서비스를 대신해서 테스트할 수 있는 mock을 교체하기 쉽다.</li>
</ol>
<p><img src="/2019-06-26/Untitled-140815fb-a316-44ff-858c-10fe2637d17d.png" alt=""></p>
<p>캐시 인벨리데이션에 대해 생각해야 한다.</p>
<p><img src="/2019-06-26/Untitled-d536c9ae-e217-4091-a2e1-28d5db8558c7.png" alt=""></p>
<p>구조화된 데이터를 캐시하기에 적절한 Room DB</p>
<p><img src="/2019-06-26/Untitled-93eb24f3-a377-4691-a37c-0fdf35865683.png" alt=""></p>
<p>작은 데이터를 캐시하기에 적절한 SharedPreferences</p>
<p><img src="/2019-06-26/Untitled-db06a2fa-29fe-4b79-b5e9-5dfd7cc13157.png" alt=""></p>
<p>이미지나 데이터파일을 캐시하기에 적절한 파일</p>
<h2 id="4-how-to-store-data">4. How to store data</h2>
<p><img src="/2019-06-26/Untitled-9ffa5e69-f555-4a04-a038-0a564f06794e.png" alt=""></p>
<p>네트워크 → Application Code → Database → Notify Application Code → UI</p>
<h2 id="5-decorating-a-room">5. Decorating a Room</h2>
<p><img src="/2019-06-26/Untitled-52416e63-4cb0-40a9-ad08-1a4021f27c57.png" alt=""></p>
<p>VideoDao</p>
<p><img src="/2019-06-26/Untitled-ab0b8c34-843c-4bda-97ea-284c0a596092.png" alt=""></p>
<p>Room 메소드 종류</p>
<h2 id="6-building-a-room">6. Building a Room</h2>
<p><img src="/2019-06-26/Untitled-81ed769b-2ed2-4c47-af2c-ecaf9f963cae.png" alt=""></p>
<p><img src="/2019-06-26/Untitled-9bfe0e20-a11f-4c74-8496-e5088614bb7f.png" alt=""></p>
<p><img src="/2019-06-26/Untitled-6123917f-f798-41e9-9a48-5ba9f902baaf.png" alt=""></p>
<p>domain object(database) / DTO(network)</p>
<h2 id="7-exercise-add-a-databasevideo-entity">7. Exercise: Add a DatabaseVideo Entity</h2>
<pre><code>fun List&lt;DatabaseVideo&gt;.asDomainModel(): List&lt;Video&gt; {
// DO to DTO
    return map {
        Video (
           url = it.url,
           title = it.title,
           description = it.description,
           updated = it.updated,
           thumbnail = it.thumbnail)
    }
}

fun NetworkVideoContainer.asDatabaseModel(): Array&lt;DatabaseVideo&gt; {
// DTO to DO
    return videos.map {
        DatabaseVideo (
           title = it.title,
           description = it.description,
           url = it.url,
           updated = it.updated,
           thumbnail = it.thumbnail)
    }.toTypedArray()
}
</code></pre>
<h2 id="8-exercise-add-the-videodao">8. Exercise: Add the VideoDao</h2>
<h2 id="9-exercise-refactor-the-videodao">9. Exercise: Refactor the VideoDao</h2>
<pre><code>@Dao
interface VideoDao {
    @Query(&quot;select * from databasevideo&quot;)
    fun getVideos(): LiveData&lt;List&lt;DatabaseVideo&gt;&gt;

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    fun insertAll(vararg videos: DatabaseVideo)
}
</code></pre>
<h2 id="10-exercise-add-the-videosdatabase">10. Exercise: Add the VideosDatabase</h2>
<h2 id="11-room-review">11. Room Review</h2>
<h2 id="12-googler-interview-sumir-kataria">12. Googler Interview: Sumir Kataria</h2>
<p>work manager</p>
<h2 id="13-using-a-room">13. Using a Room</h2>
<p>repository pattern: separation of concerns</p>
<h2 id="14-exercise-build-a-repository">14. Exercise: Build a Repository</h2>
<pre><code>class VideosRepository(private val database: VideosDatabase) {

   val videos: LiveData&lt;List&lt;Video&gt;&gt; = Transformations.map(database.videoDao.getVideos()) {
      it.asDomainModel()
   }

   suspend fun refreshVideos() {
       withContext(Dispatchers.IO) {
           val playlist = Network.devbytes.getPlaylist().await()
           database.videoDao.insertAll(*playlist.asDatabaseModel())
					// *playlist : Array를 vararg로 사용할 수 있게 하는 연산자
       }
   }
}
</code></pre>
<h2 id="15-exercise-use-the-repository">15. Exercise: Use the Repository</h2>
<pre><code>class DevByteViewModel(application: Application) : AndroidViewModel(application) {

    private val viewModelJob = SupervisorJob()
    private val viewModelScope = CoroutineScope(viewModelJob + Dispatchers.Main)

    private val database = getDatabase(application)
    private val videosRepository = VideosRepository(database)

    init {
        viewModelScope.launch {
            videosRepository.refreshVideos()
        }
    }

    val playlist = videosRepository.videos

    override fun onCleared() {
        super.onCleared()
        viewModelJob.cancel()
    }
}
</code></pre>
<h2 id="16-video-offline-caching-review">16. Video: Offline Caching Review</h2>
<h2 id="17-workmanager-for-the-background">17. WorkManager for the background</h2>
<p><img src="/2019-06-26/Untitled-82fafcc4-1f5e-4dc6-b662-297154e9d89a.png" alt=""></p>
<p>백그라운드 작업의 종류</p>
<p><img src="/2019-06-26/Untitled-6b2e629d-2be4-4f5a-adf3-cc2ab512f80a.png" alt=""></p>
<p>WorkManager의 특징</p>
<p><img src="/2019-06-26/Untitled-66277db8-9913-4b65-a794-f0d900d5a9f6.png" alt=""></p>
<p>WorkManager의 실행환경 제약들</p>
<p><img src="/2019-06-26/Untitled-5a7d6a11-dd89-4ad2-badf-ce57ae11276f.png" alt=""></p>
<p>Pre-fetching 가이드</p>
<h2 id="18-exercise-create-a-worker">18. Exercise: Create a Worker</h2>
<h2 id="19-exercise-schedule-background-work">19. Exercise: Schedule Background Work</h2>
<p>Appliaction.onCreate 에서 너무 많은 작업을 하면 앱 실행 시 렉이 길어진다! 그래서 이 프로젝트에선 아래와 같이 코딩했음.</p>
<pre><code>private fun delayedInit() {
    applicationScope.launch {
        setupRecurringWork()
    }
}

private fun setupRecurringWork() {
    val constraints = Constraints.Builder()
            .setRequiredNetworkType(NetworkType.UNMETERED)
            .setRequiresBatteryNotLow(true)
            .setRequiresCharging(true)
	            .apply {
                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {
                    setRequiresDeviceIdle(true)
                }
            }.build()

    val repeatingRequest
            = PeriodicWorkRequestBuilder&lt;RefreshDataWorker&gt;(1, TimeUnit.DAYS)
            .setConstraints(constraints)
            .build()

    WorkManager.getInstance().enqueueUniquePeriodicWork(
            RefreshDataWorker.WORK_NAME,
            ExistingPeriodicWorkPolicy.KEEP,
            repeatingRequest)
}
</code></pre>
<h2 id="20-wrapping-up-caching">20. Wrapping up Caching</h2>
<h2 id="마치면서">마치면서</h2>
<p>Repository.getData → save in database → auto-notified to Repository.LiveData → ViewModel has Repository.LiveData → Fragment has observed ViewModel.LiveData</p>
<p>매우 깔끔한 캐싱 전략! 심지어</p>
<p>WorkManager를 사용한 프리패칭까지!</p>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/posts">Posts</a></li>
         
          <li><a href="/categories">Categories</a></li>
         
          <li><a href="/tags">Tags</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#1-offline-movie-night">1. Offline Movie Night</a></li>
    <li><a href="#2-exercise-introduction">2. Exercise: Introduction</a></li>
    <li><a href="#3-whats-in-a-cache">3. What’s in a Cache</a>
      <ul>
        <li><a href="#우리앱에서-레포지토리-패턴을-써야-하는-이유">우리앱에서 레포지토리 패턴을 써야 하는 이유</a></li>
      </ul>
    </li>
    <li><a href="#4-how-to-store-data">4. How to store data</a></li>
    <li><a href="#5-decorating-a-room">5. Decorating a Room</a></li>
    <li><a href="#6-building-a-room">6. Building a Room</a></li>
    <li><a href="#7-exercise-add-a-databasevideo-entity">7. Exercise: Add a DatabaseVideo Entity</a></li>
    <li><a href="#8-exercise-add-the-videodao">8. Exercise: Add the VideoDao</a></li>
    <li><a href="#9-exercise-refactor-the-videodao">9. Exercise: Refactor the VideoDao</a></li>
    <li><a href="#10-exercise-add-the-videosdatabase">10. Exercise: Add the VideosDatabase</a></li>
    <li><a href="#11-room-review">11. Room Review</a></li>
    <li><a href="#12-googler-interview-sumir-kataria">12. Googler Interview: Sumir Kataria</a></li>
    <li><a href="#13-using-a-room">13. Using a Room</a></li>
    <li><a href="#14-exercise-build-a-repository">14. Exercise: Build a Repository</a></li>
    <li><a href="#15-exercise-use-the-repository">15. Exercise: Use the Repository</a></li>
    <li><a href="#16-video-offline-caching-review">16. Video: Offline Caching Review</a></li>
    <li><a href="#17-workmanager-for-the-background">17. WorkManager for the background</a></li>
    <li><a href="#18-exercise-create-a-worker">18. Exercise: Create a Worker</a></li>
    <li><a href="#19-exercise-schedule-background-work">19. Exercise: Schedule Background Work</a></li>
    <li><a href="#20-wrapping-up-caching">20. Wrapping up Caching</a></li>
    <li><a href="#마치면서">마치면서</a></li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&text=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&is_video=false&description=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd&body=Check out this article: %2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&name=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd&description=Lesson%209%3a%20Behind%20the%20scenes%201.%20Offline%20Movie%20Night%202.%20Exercise%3a%20Introduction%20offline%20caching%ec%97%90%20%eb%8c%80%ed%95%b4%20%eb%b0%b0%ec%9a%b8%20%ea%b1%b0%ec%95%bc%21%0a3.%20What%e2%80%99s%20in%20a%20Cache%20%ec%ba%90%ec%8b%9c%eb%9e%80%2c%20%eb%8b%a4%ec%9d%8c%ec%97%90%20%ea%b3%a7%20%ec%93%b8%20%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc%20%eb%a1%9c%ec%bb%ac%ec%97%90%20%ec%a0%80%ec%9e%a5%ed%95%b4%eb%92%80%eb%8b%a4%ea%b0%80%20%ed%95%84%ec%9a%94%ed%95%a0%20%eb%95%8c%20%eb%8b%a4%ec%8b%9c%20%ec%93%b0%eb%8a%94%20%ea%b2%83%0a%ec%9a%b0%eb%a6%ac%ec%95%b1%ec%97%90%ec%84%9c%20%eb%a0%88%ed%8f%ac%ec%a7%80%ed%86%a0%eb%a6%ac%20%ed%8c%a8%ed%84%b4%ec%9d%84%20%ec%8d%a8%ec%95%bc%20%ed%95%98%eb%8a%94%20%ec%9d%b4%ec%9c%a0%20%ec%95%b1%20%ec%8b%a4%ed%96%89%20%ec%8b%9c%ec%97%90%20%eb%8b%a4%ec%9a%b4%eb%a1%9c%eb%93%9c%eb%b0%9b%ec%95%84%20%ec%ba%90%ec%8b%9c%ed%95%b4%20%ec%82%ac%ec%9a%a9%ed%95%a0%20%eb%a7%8c%ed%95%9c%20%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%93%a4%ec%9d%b4%20%ec%9e%88%eb%8b%a4.%20%ed%95%84%ed%84%b0%20%eb%aa%a9%eb%a1%9d%20%ea%b0%99%ec%9d%80%20%eb%8d%b0%ec%9d%b4%ed%84%b0.%20%ec%9d%b4%20%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a5%bc%20%eb%94%b0%eb%a1%9c%20%ea%b4%80%eb%a6%ac%ed%95%98%eb%8a%94%20%ed%81%b4%eb%9e%98%ec%8a%a4%eb%a5%bc%20%eb%91%90%eb%8a%94%20%ea%b2%83%eb%b3%b4%eb%8b%a4%2c%20%eb%a0%88%ed%8f%ac%ec%a7%80%ed%86%a0%eb%a6%ac%20%ed%8c%a8%ed%84%b4%ec%9d%84%20%ec%8d%a8%ec%84%9c%20%eb%a0%88%ed%8f%ac%ec%a7%80%ed%86%a0%eb%a6%ac%20%ec%95%88%ec%97%90%ec%84%9c%20%ed%95%84%ec%9a%94%ed%95%9c%20%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a7%8c%20%ec%ba%90%ec%8b%9c%20%ec%8b%9c%ed%82%a4%eb%a9%b4%20%eb%a0%88%ed%8f%ac%ec%a7%80%ed%86%a0%eb%a6%ac%eb%a5%bc%20%ec%93%b0%eb%8a%94%20%ea%b3%b3%ec%97%90%ec%84%9c%eb%8a%94%20%ec%ba%90%ec%8b%9c%eb%90%98%eb%8a%94%20%eb%8d%b0%ec%9d%b4%ed%84%b0%ec%9d%b8%ec%a7%80%20%ec%8b%a4%ec%8b%9c%ea%b0%84%20%eb%8d%b0%ec%9d%b4%ed%84%b0%ec%9d%b8%ec%a7%80%20%ec%95%8c%20%ed%95%84%ec%9a%94%20%ec%97%86%ec%96%b4%ec%84%9c%20%ea%b4%80%ec%8b%ac%ec%82%ac%ec%9d%98%20%eb%b6%84%eb%a6%ac%ea%b0%80%20%eb%90%9c%eb%8b%a4." aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2f2019-06-26-udacity-developing-android-apps-with-kotlin-lesson-9-summary%2f&t=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a89%20Behind%20the%20scenes%20%ec%9a%94%ec%95%bd" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2022  Booseol Shin 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/categories">Categories</a></li>
         
        <li><a href="/tags">Tags</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
