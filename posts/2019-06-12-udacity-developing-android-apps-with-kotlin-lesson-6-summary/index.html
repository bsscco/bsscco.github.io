<!DOCTYPE html>
<html lang="">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Udacity Developing Android Apps with Kotlin 레슨6 App Architecture (Persistence) 요약 | ANDROID DEVELOPER BSSCCO</title>
  <link rel = 'canonical' href = '/posts/2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary/'>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Udacity Developing Android Apps with Kotlin 레슨6 App Architecture (Persistence) 요약" />
<meta property="og:description" content="Lesson 6: App Architecture (Persistence) 1. Wake Up, Aleks! 2. Introduction Room Database DAO Application Architecture with Room Coroutines Room 3. SQLite Primer SQLite 문법에 대한 간단 설명
4. Designing Entities Room DB layer 구조
5. Exercise: Creating the SleepNight Entity data class를 사용해 Entity 클래스 만들기
6. Data Access Object (DAO) DAO 어노테이션의 종류
7. Exercise: DAO - SleepDatabaseDao DAO 클래스 만들기
8. Creating a Room Database Room DB를 만드는 순서" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-06-12T00:00:01+00:00" />
<meta property="article:modified_time" content="2019-06-12T00:00:01+00:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Udacity Developing Android Apps with Kotlin 레슨6 App Architecture (Persistence) 요약"/>
<meta name="twitter:description" content="Lesson 6: App Architecture (Persistence) 1. Wake Up, Aleks! 2. Introduction Room Database DAO Application Architecture with Room Coroutines Room 3. SQLite Primer SQLite 문법에 대한 간단 설명
4. Designing Entities Room DB layer 구조
5. Exercise: Creating the SleepNight Entity data class를 사용해 Entity 클래스 만들기
6. Data Access Object (DAO) DAO 어노테이션의 종류
7. Exercise: DAO - SleepDatabaseDao DAO 클래스 만들기
8. Creating a Room Database Room DB를 만드는 순서"/>

  
  
    
  
  
  <link rel="stylesheet" href="/css/styles.21b53826999b56f614a462e7379896ede73d74a5692c12b28e7903a2718c278b00eb8c5d88fef06d852fd6311822698ff8397102b0517b964d57892b541fb785.css" integrity="sha512-IbU4JpmbVvYUpGLnN5iW7ec9dKVpLBKyjnkDonGMJ4sA64xdiP7wbYUv1jEYImmP&#43;DlxArBRe5ZNV4krVB&#43;3hQ=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="images/favicon.ico" />

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/categories">Categories</a></li>
         
        <li><a href="/tags">Tags</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" /posts/2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-5-summary/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="/posts/2019-06-19-udacity-developing-android-apps-with-kotlin-lesson-7-summary/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&text=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&is_video=false&description=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd&body=Check out this article: %2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&name=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd&description=Lesson%206%3a%20App%20Architecture%20%28Persistence%29%201.%20Wake%20Up%2c%20Aleks%21%202.%20Introduction%20Room%20Database%20DAO%20Application%20Architecture%20with%20Room%20Coroutines%20Room%203.%20SQLite%20Primer%20SQLite%20%eb%ac%b8%eb%b2%95%ec%97%90%20%eb%8c%80%ed%95%9c%20%ea%b0%84%eb%8b%a8%20%ec%84%a4%eb%aa%85%0a4.%20Designing%20Entities%20Room%20DB%20layer%20%ea%b5%ac%ec%a1%b0%0a5.%20Exercise%3a%20Creating%20the%20SleepNight%20Entity%20data%20class%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%b4%20Entity%20%ed%81%b4%eb%9e%98%ec%8a%a4%20%eb%a7%8c%eb%93%a4%ea%b8%b0%0a6.%20Data%20Access%20Object%20%28DAO%29%20DAO%20%ec%96%b4%eb%85%b8%ed%85%8c%ec%9d%b4%ec%85%98%ec%9d%98%20%ec%a2%85%eb%a5%98%0a7.%20Exercise%3a%20DAO%20-%20SleepDatabaseDao%20DAO%20%ed%81%b4%eb%9e%98%ec%8a%a4%20%eb%a7%8c%eb%93%a4%ea%b8%b0%0a8.%20Creating%20a%20Room%20Database%20Room%20DB%eb%a5%bc%20%eb%a7%8c%eb%93%9c%eb%8a%94%20%ec%88%9c%ec%84%9c" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&t=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#1-wake-up-aleks">1. Wake Up, Aleks!</a></li>
    <li><a href="#2-introduction">2. Introduction</a></li>
  </ul>

  <ul>
    <li><a href="#3-sqlite-primer">3. SQLite Primer</a></li>
    <li><a href="#4-designing-entities">4. Designing Entities</a></li>
    <li><a href="#5-exercise-creating-the-sleepnight-entity">5. Exercise: Creating the SleepNight Entity</a></li>
    <li><a href="#6-data-access-object-dao">6. Data Access Object (DAO)</a></li>
    <li><a href="#7-exercise-dao---sleepdatabasedao">7. Exercise: DAO - SleepDatabaseDao</a></li>
    <li><a href="#8-creating-a-room-database">8. Creating a Room Database</a></li>
    <li><a href="#9-exercise-creating-a-room-database">9. Exercise: Creating a Room Database</a></li>
    <li><a href="#10-testing-the-room-database">10. Testing the Room Database</a></li>
    <li><a href="#11-displaying-sleep-data">11. Displaying Sleep Data</a></li>
    <li><a href="#12-adding-a-viewmodel">12. Adding A ViewModel</a></li>
    <li><a href="#13-exercise-adding-a-viewmodel">13. Exercise: Adding a ViewModel</a></li>
  </ul>

  <ul>
    <li><a href="#14-multithreading-and-coroutines">14. Multithreading and Coroutines</a></li>
    <li><a href="#15-exercise-coroutines-for-long-running-operations">15. Exercise: Coroutines for Long-running Operations</a>
      <ul>
        <li><a href="#scope-개념-잘-모르겠음">Scope 개념 잘 모르겠음!</a></li>
      </ul>
    </li>
    <li><a href="#16-googler-interview-florina-muntenescu">16. Googler Interview: Florina Muntenescu</a></li>
    <li><a href="#17-navigation-and-sleep-quality">17. Navigation and Sleep Quality</a></li>
    <li><a href="#18-exercise-recording-sleep-quality">18. Exercise: Recording Sleep Quality</a></li>
    <li><a href="#19-transformation-maps">19. Transformation Maps</a></li>
    <li><a href="#20-exercise-button-states-and-snackbar">20. Exercise: Button States and SnackBar</a></li>
    <li><a href="#21-where-to-go-next">21. Where to go next?</a></li>
    <li><a href="#마치면서">마치면서</a></li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Udacity Developing Android Apps with Kotlin 레슨6 App Architecture (Persistence) 요약
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2019-06-12 00:00:01 &#43;0000 UTC" itemprop="datePublished">2019-06-12</time>
          
        </div>
        
        
        
        <div class="article-category">
            <i class="fas fa-archive"></i>
            
            
            <a class="category-link" href="/categories/android">Android</a>
            
        </div>
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/kotlin" rel="tag">kotlin</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <h1 id="lesson-6-app-architecture-persistence">Lesson 6: App Architecture (Persistence)</h1>
<h2 id="1-wake-up-aleks">1. Wake Up, Aleks!</h2>
<h2 id="2-introduction">2. Introduction</h2>
<ul>
<li>Room Database</li>
<li>DAO</li>
<li>Application Architecture with Room</li>
<li>Coroutines</li>
</ul>
<h1 id="room">Room</h1>
<hr>
<h2 id="3-sqlite-primer">3. SQLite Primer</h2>
<p>SQLite 문법에 대한 간단 설명</p>
<h2 id="4-designing-entities">4. Designing Entities</h2>
<p><img src="/2019-06-12/Untitled-28e707d7-0703-4e42-b08c-c832f51b8a08.png" alt=""></p>
<p>Room DB layer 구조</p>
<h2 id="5-exercise-creating-the-sleepnight-entity">5. Exercise: Creating the SleepNight Entity</h2>
<p><img src="/2019-06-12/Untitled-378777d8-8daf-488b-95e7-7b5cc17a0182.png" alt=""></p>
<p>data class를 사용해 Entity 클래스 만들기</p>
<h2 id="6-data-access-object-dao">6. Data Access Object (DAO)</h2>
<p><img src="/2019-06-12/Untitled-b4c160a9-fb7b-4bf3-b70f-6d0355a727fb.png" alt=""></p>
<p>DAO 어노테이션의 종류</p>
<h2 id="7-exercise-dao---sleepdatabasedao">7. Exercise: DAO - SleepDatabaseDao</h2>
<p><img src="/2019-06-12/Untitled-915fbc8d-7ed7-4dd5-bf30-138b10dcea78.png" alt=""></p>
<p>DAO 클래스 만들기</p>
<h2 id="8-creating-a-room-database">8. Creating a Room Database</h2>
<p><img src="/2019-06-12/Untitled-98fd58a9-18f3-41fa-a743-0e54463f7a0c.png" alt=""></p>
<p>Room DB를 만드는 순서</p>
<h2 id="9-exercise-creating-a-room-database">9. Exercise: Creating a Room Database</h2>
<pre><code>@Database(entities = [SleepNight::class], version = 1, exportSchema = false)
abstract class SleepDatabase : RoomDatabase() {

abstract val sleepDatabaseDao: SleepDatabaseDao

companion object {

    @Volatile
    private var INSTANCE: SleepDatabase? = null

    fun getInstance(context: Context): SleepDatabase {
        synchronized(this) {
            var instance = INSTANCE 

            if (instance == null) {
                instance = Room.databaseBuilder(
                        context.applicationContext,
                        SleepDatabase::class.java,
                        &quot;sleep_history_database&quot;
                )
                        .fallbackToDestructiveMigration()
                        .build()
                INSTANCE = instance
            }
            return instance
        }
     }
  }
}
</code></pre>
<ul>
<li>exportScheme는 기본이 true이고, true일 때 스키마파일을 폴더에 저장시킨다고 한다.</li>
<li>@Volatile의 의미 : <a href="https://woovictory.github.io/2019/01/04/Android-What-is-Singleton-Pattern/">https://woovictory.github.io/2019/01/04/Android-What-is-Singleton-Pattern</a>
<ul>
<li>synchronized 블록으로 감쌌더라도 INSTANCE의 null값이 스레드 캐시에 저장돼있는 상태라면, 다른 스레드에서 먼저 INSTANCE에 DB인스턴스를 대입했더라도 스레드 캐시에 있는 null값을 사용할 확률이 있다. INSTANCE를 volatile로 선언해서 항상 메인 메모리에서 읽어오도록 하면 스레드 캐시에 저장했을 때 발생하는 문제를 예방할 수 있다.</li>
</ul>
</li>
<li>.fallbackToDestructiveMigration() 옵션은 DB 버전이 올라갔을 때 DB 데이터를 제거하고 DB를 새로 만든다.</li>
</ul>
<h2 id="10-testing-the-room-database">10. Testing the Room Database</h2>
<pre><code>@RunWith(AndroidJUnit4::class)
class SleepDatabaseTest {ㅇ

    private lateinit var sleepDao: SleepDatabaseDao
    private lateinit var db: SleepDatabase

    @Before
    fun createDb() {
        val context = InstrumentationRegistry.getInstrumentation().targetContext
        // Using an in-memory database because the information stored here disappears when the
        // process is killed.
        db = Room.inMemoryDatabaseBuilder(context, SleepDatabase::class.java)
                // Allowing main thread queries, just for testing.
                .allowMainThreadQueries()
                .build()
        sleepDao = db.sleepDatabaseDao
    }

    @After
    @Throws(IOException::class)
    fun closeDb() {
        db.close()
    }

    @Test
    @Throws(Exception::class)
    fun insertAndGetNight() {
        val night = SleepNight()
        sleepDao.insert(night)
        val tonight = sleepDao.getTonight()
        assertEquals(tonight?.sleepQuality, -1)
    }
}
</code></pre>
<p>Room 유닛테스트는 쿼리 테스트용으로 좋을 것 같다.</p>
<h2 id="11-displaying-sleep-data">11. Displaying Sleep Data</h2>
<p>메인 액티비티 레이아웃과 두 프래그먼트 레이아웃을 살펴봄.</p>
<p><!-- raw HTML omitted --> 태그 : <!-- raw HTML omitted -->는 루트 레이아웃이 꼭 있어야 하는데, <!-- raw HTML omitted -->는 루트 레이아웃이 필요 없다. 다른 레이아웃에 삽입될 때 <!-- raw HTML omitted --> 태그는 사라지고 자식태그들만 붙여진다.</p>
<h2 id="12-adding-a-viewmodel">12. Adding A ViewModel</h2>
<p>비지니스 로직은 ViewModel로 구현하고, DB 명령은 coroutines를 사용해 백그라운드 스레드로 실행할 것이라고 함.</p>
<h2 id="13-exercise-adding-a-viewmodel">13. Exercise: Adding a ViewModel</h2>
<p>ViewModel과 ViewModelFactory를 구현하고 ViewModel을 레이아웃 파일에 연결함.</p>
<h1 id="coroutines">Coroutines</h1>
<hr>
<h2 id="14-multithreading-and-coroutines">14. Multithreading and Coroutines</h2>
<p><img src="/2019-06-12/Untitled-1f06d69e-6537-410e-a454-a1d3ecf8398a.png" alt=""></p>
<p>코루틴의 특징</p>
<p><img src="/2019-06-12/Untitled-929eff06-cd7a-4c00-b491-e90d3936b29a.png" alt=""></p>
<p>코루틴을 쓰려면 필요한 것들</p>
<p><img src="/2019-06-12/Untitled-eb3308c9-b2dc-4f12-a9b2-473e5861cbc9.png" alt=""></p>
<p><a href="https://twitter.com/akarnokd/status/979732723152687106">https://twitter.com/akarnokd/status/979732723152687106</a></p>
<h2 id="15-exercise-coroutines-for-long-running-operations">15. Exercise: Coroutines for Long-running Operations</h2>
<pre><code>private var viewModelJob = Job() // 이 ViewModel의 모든 코루틴을 취소시킬 수 있는 객체
</code></pre>
<h3 id="scope-개념-잘-모르겠음">Scope 개념 잘 모르겠음!</h3>
<p>Room Dao로 반환한 LiveData는 Room DB 데이터가 바뀌면 자동으로 갱신되는 장점이 있다!</p>
<h2 id="16-googler-interview-florina-muntenescu">16. Googler Interview: Florina Muntenescu</h2>
<h2 id="17-navigation-and-sleep-quality">17. Navigation and Sleep Quality</h2>
<p><img src="/2019-06-12/Untitled-8442a097-6d39-4cac-a072-3cdcf597f278.png" alt=""></p>
<h2 id="18-exercise-recording-sleep-quality">18. Exercise: Recording Sleep Quality</h2>
<pre><code>sleepTrackerViewModel.navigateToSleepQuality.observe(this, Observer { night -&gt;
    night?.let {
        this.findNavController().navigate(
                SleepTrackerFragmentDirections
                        .actionSleepTrackerFragmentToSleepQualityFragment(night.nightId))
        // Reset state to make sure we only navigate once, even if the device
        // has a configuration change.
        sleepTrackerViewModel.doneNavigating()
    }
})
</code></pre>
<p>state가 아닌 event는 이런 식으로 View(Fragment)단에서 LiveData를 observe 해서 처리하는 패턴이 보임.</p>
<p>SleepQualityFragment에서 DB 데이터를 바꾸고 SleepTrackerFragment로 돌아왔을 때 SleepTrackerFragment에서 사용하는 LiveData도 자동으로 갱신된 것을 볼 수 있다. 심지어 라이프사이클을 잘 알기 때문에 자동으로 적절한 시점에 갱신 된다. 화면 간 상태 동기화 문제를 Bus 기법이나 다른 보일러플레이트 코드 없이도 간단하게 해결할 수 있는 장점이 있다. 단, 상태 동기화가 필요한 데이터의 DB화하는 또 다른 수고가 생긴다.</p>
<h2 id="19-transformation-maps">19. Transformation Maps</h2>
<h2 id="20-exercise-button-states-and-snackbar">20. Exercise: Button States and SnackBar</h2>
<pre><code>val stopButtonVisible = Transformations.map(tonight) {
	null != it
}

val clearButtonVisible = Transformations.map(nights) {
	it?.isNotEmpty()
}
</code></pre>
<p>LiveData 가공은 Transformations.map()! 다시 한 번 각인됨.</p>
<h2 id="21-where-to-go-next">21. Where to go next?</h2>
<p><img src="/2019-06-12/Untitled-e01f203d-4bbc-4450-9043-96372b076921.png" alt=""></p>
<p>ViewModelFactory를 쓰는 이유 하나 더 생각 남 : DI를 쓰면 코드 수정을 최소화해서 테스트하기 편하기 때문</p>
<h2 id="마치면서">마치면서</h2>
<p>다른 화면 사이에서 Room~LiveData 자동 갱신 연계가 매우 인상적이었다. 정말 간결하고 쓰기 편하다고 생각한다.</p>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/posts">Posts</a></li>
         
          <li><a href="/categories">Categories</a></li>
         
          <li><a href="/tags">Tags</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#1-wake-up-aleks">1. Wake Up, Aleks!</a></li>
    <li><a href="#2-introduction">2. Introduction</a></li>
  </ul>

  <ul>
    <li><a href="#3-sqlite-primer">3. SQLite Primer</a></li>
    <li><a href="#4-designing-entities">4. Designing Entities</a></li>
    <li><a href="#5-exercise-creating-the-sleepnight-entity">5. Exercise: Creating the SleepNight Entity</a></li>
    <li><a href="#6-data-access-object-dao">6. Data Access Object (DAO)</a></li>
    <li><a href="#7-exercise-dao---sleepdatabasedao">7. Exercise: DAO - SleepDatabaseDao</a></li>
    <li><a href="#8-creating-a-room-database">8. Creating a Room Database</a></li>
    <li><a href="#9-exercise-creating-a-room-database">9. Exercise: Creating a Room Database</a></li>
    <li><a href="#10-testing-the-room-database">10. Testing the Room Database</a></li>
    <li><a href="#11-displaying-sleep-data">11. Displaying Sleep Data</a></li>
    <li><a href="#12-adding-a-viewmodel">12. Adding A ViewModel</a></li>
    <li><a href="#13-exercise-adding-a-viewmodel">13. Exercise: Adding a ViewModel</a></li>
  </ul>

  <ul>
    <li><a href="#14-multithreading-and-coroutines">14. Multithreading and Coroutines</a></li>
    <li><a href="#15-exercise-coroutines-for-long-running-operations">15. Exercise: Coroutines for Long-running Operations</a>
      <ul>
        <li><a href="#scope-개념-잘-모르겠음">Scope 개념 잘 모르겠음!</a></li>
      </ul>
    </li>
    <li><a href="#16-googler-interview-florina-muntenescu">16. Googler Interview: Florina Muntenescu</a></li>
    <li><a href="#17-navigation-and-sleep-quality">17. Navigation and Sleep Quality</a></li>
    <li><a href="#18-exercise-recording-sleep-quality">18. Exercise: Recording Sleep Quality</a></li>
    <li><a href="#19-transformation-maps">19. Transformation Maps</a></li>
    <li><a href="#20-exercise-button-states-and-snackbar">20. Exercise: Button States and SnackBar</a></li>
    <li><a href="#21-where-to-go-next">21. Where to go next?</a></li>
    <li><a href="#마치면서">마치면서</a></li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&text=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&is_video=false&description=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd&body=Check out this article: %2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&title=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&name=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd&description=Lesson%206%3a%20App%20Architecture%20%28Persistence%29%201.%20Wake%20Up%2c%20Aleks%21%202.%20Introduction%20Room%20Database%20DAO%20Application%20Architecture%20with%20Room%20Coroutines%20Room%203.%20SQLite%20Primer%20SQLite%20%eb%ac%b8%eb%b2%95%ec%97%90%20%eb%8c%80%ed%95%9c%20%ea%b0%84%eb%8b%a8%20%ec%84%a4%eb%aa%85%0a4.%20Designing%20Entities%20Room%20DB%20layer%20%ea%b5%ac%ec%a1%b0%0a5.%20Exercise%3a%20Creating%20the%20SleepNight%20Entity%20data%20class%eb%a5%bc%20%ec%82%ac%ec%9a%a9%ed%95%b4%20Entity%20%ed%81%b4%eb%9e%98%ec%8a%a4%20%eb%a7%8c%eb%93%a4%ea%b8%b0%0a6.%20Data%20Access%20Object%20%28DAO%29%20DAO%20%ec%96%b4%eb%85%b8%ed%85%8c%ec%9d%b4%ec%85%98%ec%9d%98%20%ec%a2%85%eb%a5%98%0a7.%20Exercise%3a%20DAO%20-%20SleepDatabaseDao%20DAO%20%ed%81%b4%eb%9e%98%ec%8a%a4%20%eb%a7%8c%eb%93%a4%ea%b8%b0%0a8.%20Creating%20a%20Room%20Database%20Room%20DB%eb%a5%bc%20%eb%a7%8c%eb%93%9c%eb%8a%94%20%ec%88%9c%ec%84%9c" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2f2019-06-12-udacity-developing-android-apps-with-kotlin-lesson-6-summary%2f&t=Udacity%20Developing%20Android%20Apps%20with%20Kotlin%20%eb%a0%88%ec%8a%a86%20App%20Architecture%20%28Persistence%29%20%ec%9a%94%ec%95%bd" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2022  Booseol Shin 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/categories">Categories</a></li>
         
        <li><a href="/tags">Tags</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
